<div class="p-4 flex flex-col gap-2 items-center">
  <p-table [value]="productos" class="w-full">
    <ng-template #header>
      <tr>
        <th>Nombre</th>
        <th>Descipcion</th>
        <th>Precio</th>
      </tr>
    </ng-template>
    <ng-template #body let-product>
      <tr>
        <td>{{ product.nombre }}</td>
        <td>{{ product.descripcion }}</td>
        <td>{{ product.precio }}</td>
        <!-- ACÁ SE ENCUENTRAN LAS ACCIONES DEL CRUD -->

        <td class="text-center! flex gap-2 items-center">
          <p-button severity="info" label="Details" (onClick)="viewDetails(product.id)"></p-button>
          <p-button
            label="Actualizar"
            severity="warn"
            (onClick)="viewUpdForm(product.id)"
          ></p-button>
          <p-button
            label="Borrar"
            severity="danger"
            (onClick)="deleteProduct(product.id)"
          ></p-button>
        </td>

        <!--  -->
      </tr>
    </ng-template>
  </p-table>

  <p-button label="Crear producto" (onClick)="visible = true"></p-button>
</div>

<p-dialog [modal]="true" [closable]="true" [(visible)]="visible" header="Formulario de producto">
  <form [formGroup]="productosForm" class="flex flex-col gap-4" (ngSubmit)="submitForm()">
    <div class="flex flex-col items-start">
      <label for="nombre">Nombre del producto</label>
      <input pInputText formControlName="nombre" class="w-full" />
    </div>
    <div class="flex flex-col items-start">
      <label for="descripcion">Descripción del producto</label>
      <textarea
        pTextarea
        rows="5"
        id="descripcion"
        formControlName="descripcion"
        class="w-full"
      ></textarea>
    </div>
    <div class="flex items-center gap-4">
      <div class="flex flex-col items-start">
        <label for="precio">Precio del producto</label>
        <input pInputText type="number" formControlName="precio" />
      </div>
      <div class="flex flex-col items-start">
        <label for="estadoId">Estado del producto</label>
        <p-select
          [options]="estados"
          formControlName="estadoId"
          optionLabel="nombre"
          optionValue="id"
          placeholder="Selecciona un estado"
          [filter]="true"
          filterBy="nombre"
          [showClear]="true"
          appendTo="body"
        />
      </div>
    </div>
    <p-button label="Enviar" type="submit" class="self-center"></p-button>
  </form>
</p-dialog>
